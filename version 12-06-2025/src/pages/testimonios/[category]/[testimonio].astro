---
import Layout from '../../../layouts/Layout.astro';
import PropertyCarousel from '../../../components/PropertyCarousel.astro';
import AreaAdvisors from '../../../components/AreaAdvisors.astro';

// Mock de datos para el testimonio
const { category, testimonio } = Astro.params;

// Datos del testimonio específico
const testimonioData = {
  'juan-luis-guerra-casa-de-campo': {
    title: 'Mi experiencia comprando en Casa de Campo',
    subtitle: 'El proceso completo de compra de mi villa de ensueño',
    author: {
      name: 'Juan Luis Guerra',
      avatar: 'https://i.pravatar.cc/150?img=8',
      location: 'Casa de Campo',
      verified: true,
      isCelebrity: true,
      profession: 'Músico y Compositor',
      socialMedia: {
        instagram: '@juanluisguerra',
        followers: '2.3M'
      }
    },
    rating: 5,
    featuredImage: 'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=1200&h=800&fit=crop',
    propertyType: 'Villa de Lujo',
    location: 'Casa de Campo',
    publishedAt: '2024-02-28',
    category: 'Compradores Exitosos',
    categorySlug: 'compradores',
    readTime: '4 min',
    views: '15,234',
    
    // Historia completa
    fullTestimonial: `Mi búsqueda de la propiedad perfecta en Casa de Campo comenzó hace más de un año. Como músico, necesitaba un espacio que me inspirara y me permitiera crear, pero también quería un hogar donde mi familia pudiera disfrutar de la tranquilidad y belleza de República Dominicana.

Cuando contacté a CLIC Inmobiliaria, desde el primer momento sentí que entendían exactamente lo que buscaba. María Rodríguez, mi asesora, se tomó el tiempo de conocer mis necesidades específicas: necesitaba un estudio de música aislado acústicamente, espacios amplios para recibir invitados, y por supuesto, esa vista al mar que tanto amo.

**El proceso de búsqueda**

Lo que más me impresionó fue la profesionalidad del equipo. En lugar de mostrarme 20 propiedades al azar, María seleccionó cuidadosamente solo 3 opciones que realmente cumplían con mis criterios. Cada visita estaba perfectamente organizada, con información detallada sobre la propiedad, el vecindario y las posibilidades de personalización.

La villa que finalmente elegí superó todas mis expectativas. Los 650 metros cuadrados están distribuidos de manera perfecta: 6 habitaciones, cada una con su propio carácter, un estudio de música con aislamiento profesional, y esas vistas al campo de golf y al mar que me quitan el aliento cada mañana.

**Negociación y cierre**

El proceso de negociación fue transparente y profesional. CLIC no solo me ayudó a conseguir un precio justo, sino que también me asesoró en todos los aspectos legales. Como no vivo permanentemente en República Dominicana, necesitaba estar seguro de que todos los documentos estuvieran en orden.

El equipo legal de CLIC fue excepcional. Me explicaron cada paso del proceso, desde la verificación de títulos hasta los permisos de construcción para las modificaciones que quería hacer al estudio. Todo el proceso tomó solo 45 días, mucho menos de lo que esperaba.

**La mudanza y más allá**

Lo que realmente distingue a CLIC es el servicio post-venta. Después de la compra, me ayudaron a coordinar las renovaciones del estudio, me conectaron con los mejores arquitectos y contratistas de la zona, e incluso me recomendaron servicios locales de confianza.

Hoy, más de 6 meses después, puedo decir que esta villa se ha convertido en mi refugio creativo. He compuesto algunas de mis mejores canciones aquí, y mi familia considera este lugar nuestro verdadero hogar en el Caribe.

**Mi recomendación**

Si estás considerando comprar una propiedad en República Dominicana, especialmente en Casa de Campo, no busques más. CLIC tiene el conocimiento local, la profesionalidad internacional y, sobre todo, la pasión por ayudarte a encontrar no solo una propiedad, sino tu hogar ideal.

La inversión de $2.5 millones no solo me dio una villa espectacular, sino también la tranquilidad de saber que todo el proceso fue manejado por verdaderos expertos. Mi recomendación es total y absoluta.`,

    // Detalles de la compra
    purchaseDetails: {
      purchaseValue: '$2,500,000',
      processTime: '45 días',
      propertySize: '650 m²',
      bedrooms: 6,
      bathrooms: 7,
      lotSize: '1,200 m²',
      yearBuilt: '2019',
      features: [
        'Estudio de música profesional',
        'Vista al campo de golf',
        'Vista parcial al mar', 
        'Piscina infinita',
        'Gazebo y área BBQ',
        'Gimnasio privado',
        'Garaje para 3 vehículos',
        'Sistema domótica completo'
      ]
    },

    // Timeline del proceso
    timeline: [
      {
        date: '15 Enero 2024',
        title: 'Primer contacto',
        description: 'Consulta inicial con María Rodríguez para definir criterios de búsqueda'
      },
      {
        date: '22 Enero 2024', 
        title: 'Visitas programadas',
        description: 'Tour por 3 propiedades pre-seleccionadas en Casa de Campo'
      },
      {
        date: '28 Enero 2024',
        title: 'Oferta presentada',
        description: 'Presentación de oferta formal después de segunda visita'
      },
      {
        date: '5 Febrero 2024',
        title: 'Negociación exitosa',
        description: 'Acuerdo final de precio y términos de compra'
      },
      {
        date: '12 Febrero 2024',
        title: 'Due diligence',
        description: 'Revisión legal completa y verificación de documentos'
      },
      {
        date: '28 Febrero 2024',
        title: 'Cierre exitoso',
        description: 'Firma de escrituras y entrega oficial de la propiedad'
      }
    ],

    // Galería de fotos adicionales
    photoGallery: [
      {
        url: 'https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=1200&h=800&fit=crop',
        caption: 'Fachada principal de la villa con vista al campo de golf'
      },
      {
        url: 'https://images.unsplash.com/photo-1600607687644-aac4c3eac7f4?w=1200&h=800&fit=crop',
        caption: 'Sala principal con doble altura y vista panorámica'
      },
      {
        url: 'https://images.unsplash.com/photo-1600607687920-4e2a09cf159d?w=1200&h=800&fit=crop',
        caption: 'Estudio de música con aislamiento acústico profesional'
      },
      {
        url: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=1200&h=800&fit=crop',
        caption: 'Master suite con terraza privada y vista al mar'
      },
      {
        url: 'https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?w=1200&h=800&fit=crop',
        caption: 'Área de piscina infinita con gazebo'
      },
      {
        url: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1200&h=800&fit=crop',
        caption: 'Comedor exterior con vista al campo de golf'
      }
    ],

    // Propiedades similares disponibles
    similarProperties: [
      {
        slug: 'villa-casa-de-campo-premium',
        titulo: 'Villa Premium en Casa de Campo',
        precio: '$2,800,000',
        imagen: 'https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800&h=600&fit=crop',
        sector: 'Casa de Campo',
        habitaciones: 6,
        banos: 6,
        metros: 580,
        tipo: 'Villa de Lujo',
        destacado: true,
        descuento: 'Estilo Juan Luis Guerra'
      },
      {
        slug: 'villa-artista-casa-de-campo',
        titulo: 'Villa perfecta para artistas',
        precio: '$1,950,000',
        imagen: 'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800&h=600&fit=crop',
        sector: 'Casa de Campo',
        habitaciones: 5,
        banos: 5,
        metros: 520,
        tipo: 'Villa',
        nuevo: true
      },
      {
        slug: 'casa-moderna-casa-de-campo',
        titulo: 'Casa moderna vista al golf',
        precio: '$1,650,000',
        imagen: 'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=600&fit=crop',
        sector: 'Casa de Campo',
        habitaciones: 4,
        banos: 4,
        metros: 450,
        tipo: 'Casa de Lujo'
      }
    ],

    // Testimonios relacionados
    relatedTestimonials: [
      {
        id: '1',
        title: 'Nuestra villa de ensueño en Punta Cana',
        author: 'Familia Martínez',
        thumbnail: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=400&h=300&fit=crop',
        category: 'compradores',
        slug: 'familia-martinez-punta-cana',
        excerpt: 'Después de años buscando, CLIC nos ayudó a encontrar nuestra villa perfecta',
        rating: 5
      },
      {
        id: '2',
        title: 'Mi primer apartamento: una experiencia increíble',
        author: 'Carlos Rodríguez',
        thumbnail: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=300&fit=crop',
        category: 'compradores',
        slug: 'carlos-rodriguez-primer-apartamento',
        excerpt: 'Como primer comprador, CLIC me guió en todo el proceso',
        rating: 5
      },
      {
        id: '3',
        title: 'Inversión exitosa en el Caribe',
        author: 'Mikhail Petrov',
        thumbnail: 'https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=400&h=300&fit=crop',
        category: 'compradores',
        slug: 'mikhail-petrov-inversion-exitosa',
        excerpt: 'Mi portafolio de propiedades en RD ha superado expectativas',
        rating: 5
      }
    ],

    // Asesores que participaron
    teamMembers: [
      {
        slug: 'maria-rodriguez',
        name: 'María Rodríguez',
        title: 'Asesora Principal - Propiedades de Lujo',
        avatar: 'https://i.pravatar.cc/150?img=5',
        specialties: ['Casa de Campo', 'Cap Cana', 'Propiedades Premium'],
        experience: '8 años',
        languages: ['Español', 'Inglés', 'Francés'],
        phone: '+1 809 555 0101',
        whatsapp: '18095550101',
        rating: 4.9,
        reviewCount: 127,
        testimonialQuote: 'Trabajar con Juan Luis fue un honor. Su visión clara y pasión por la música hicieron que fuera fácil encontrar la propiedad perfecta para él.'
      },
      {
        slug: 'carlos-legal',
        name: 'Carlos Santana',
        title: 'Director Legal',
        avatar: 'https://i.pravatar.cc/150?img=8',
        specialties: ['Transacciones de Lujo', 'Derecho Inmobiliario'],
        experience: '12 años',
        languages: ['Español', 'Inglés'],
        phone: '+1 809 555 0108',
        whatsapp: '18095550108',
        rating: 4.8,
        reviewCount: 89,
        testimonialQuote: 'La compra de Juan Luis requería atención especial a los detalles legales. Nos aseguramos de que todo estuviera perfecto.'
      }
    ]
  }
};

const currentTestimonio = testimonioData[testimonio] || testimonioData['juan-luis-guerra-casa-de-campo'];

// Función para formatear fecha
function formatDate(dateString) {
  const date = new Date(dateString);
  const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 
                  'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
  return `${date.getDate()} de ${months[date.getMonth()]} ${date.getFullYear()}`;
}

// Función para formatear fecha corta
function formatDateShort(dateString) {
  const date = new Date(dateString);
  return `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`;
}
---

<Layout 
  title={`${currentTestimonio.title} - ${currentTestimonio.author.name} | Testimonios CLIC`} 
  description={`${currentTestimonio.subtitle} - Historia completa de ${currentTestimonio.author.name} comprando con CLIC Inmobiliaria`}
>
  <!-- Breadcrumbs -->
  <section class="bg-gray-50 py-4">
    <div class="container mx-auto px-4">
      <nav class="text-sm text-gray-600">
        <a href="/testimonios" class="hover:text-[#f04e00]">Testimonios</a>
        <span class="mx-2">/</span>
        <a href={`/testimonios/${currentTestimonio.categorySlug}`} class="hover:text-[#f04e00]">
          {currentTestimonio.category}
        </a>
        <span class="mx-2">/</span>
        <span class="text-gray-900">{currentTestimonio.title}</span>
      </nav>
    </div>
  </section>

  <!-- Header Section -->
  <section class="py-8">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <!-- Author info -->
        <div class="flex items-center gap-4 mb-6">
          <img 
            src={currentTestimonio.author.avatar} 
            alt={currentTestimonio.author.name}
            class="w-16 h-16 rounded-full border-4 border-white shadow-lg"
          />
          <div class="flex-1">
            <div class="flex items-center gap-3 mb-1">
              <h2 class="text-xl font-bold text-gray-900">{currentTestimonio.author.name}</h2>
              {currentTestimonio.author.verified && (
                <span class="bg-green-500 text-white p-1 rounded-full">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                </span>
              )}
              {currentTestimonio.author.isCelebrity && (
                <span class="bg-yellow-500 text-white px-2 py-1 rounded text-xs font-medium">
                  ⭐ Celebridad
                </span>
              )}
            </div>
            <p class="text-gray-600">{currentTestimonio.author.profession}</p>
            <p class="text-sm text-gray-500">{currentTestimonio.author.location}</p>
          </div>
          <div class="text-right">
            <div class="flex justify-end mb-1">
              {Array.from({length: currentTestimonio.rating}, (_, i) => (
                <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
              ))}
            </div>
            <p class="text-sm text-gray-500">Calificación: {currentTestimonio.rating}/5</p>
          </div>
        </div>

        <!-- Title and metadata -->
        <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">
          {currentTestimonio.title}
        </h1>
        <p class="text-xl text-gray-600 mb-6">{currentTestimonio.subtitle}</p>
        
        <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600 mb-8">
          <span class="flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
            </svg>
            {currentTestimonio.views} lecturas
          </span>
          <span class="flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            {currentTestimonio.readTime} de lectura
          </span>
          <span class="flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            {formatDate(currentTestimonio.publishedAt)}
          </span>
          <span class="flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            {currentTestimonio.location}
          </span>
        </div>

        <!-- Featured Image -->
        <div class="aspect-video bg-gray-200 rounded-xl overflow-hidden shadow-lg mb-8">
          <img 
            src={currentTestimonio.featuredImage} 
            alt={currentTestimonio.title}
            class="w-full h-full object-cover"
          />
        </div>
      </div>
    </div>
  </section>

  <!-- Purchase Details Cards -->
  <section class="py-8 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">Detalles de la Compra</h2>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
          <div class="bg-white rounded-lg p-4 text-center shadow-md">
            <div class="text-2xl font-bold text-[#f04e00]">{currentTestimonio.purchaseDetails.purchaseValue}</div>
            <div class="text-sm text-gray-600">Valor de compra</div>
          </div>
          <div class="bg-white rounded-lg p-4 text-center shadow-md">
            <div class="text-2xl font-bold text-[#f04e00]">{currentTestimonio.purchaseDetails.processTime}</div>
            <div class="text-sm text-gray-600">Tiempo de proceso</div>
          </div>
          <div class="bg-white rounded-lg p-4 text-center shadow-md">
            <div class="text-2xl font-bold text-[#f04e00]">{currentTestimonio.purchaseDetails.propertySize}</div>
            <div class="text-sm text-gray-600">Construcción</div>
          </div>
          <div class="bg-white rounded-lg p-4 text-center shadow-md">
            <div class="text-2xl font-bold text-[#f04e00]">{currentTestimonio.purchaseDetails.bedrooms}</div>
            <div class="text-sm text-gray-600">Habitaciones</div>
          </div>
        </div>
        
        <div class="bg-white rounded-lg p-6 shadow-md">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">Características Principales</h3>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
            {currentTestimonio.purchaseDetails.features.map(feature => (
              <div class="flex items-center gap-2">
                <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <span class="text-sm text-gray-700">{feature}</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Full Testimonial -->
  <section class="py-12">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <div class="prose prose-lg max-w-none">
          <div class="whitespace-pre-line text-gray-700 leading-relaxed">
            {currentTestimonio.fullTestimonial}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Timeline -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl font-bold text-gray-900 mb-8">Timeline del Proceso</h2>
        
        <div class="space-y-6">
          {currentTestimonio.timeline.map((event, index) => (
            <div class="flex gap-4">
              <div class="flex flex-col items-center">
                <div class="w-4 h-4 bg-[#f04e00] rounded-full"></div>
                {index < currentTestimonio.timeline.length - 1 && (
                  <div class="w-0.5 h-16 bg-gray-300 mt-2"></div>
                )}
              </div>
              <div class="flex-1 pb-8">
                <div class="text-sm text-gray-500 mb-1">{formatDateShort(event.date)}</div>
                <h3 class="font-semibold text-gray-900 mb-2">{event.title}</h3>
                <p class="text-gray-600">{event.description}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Photo Gallery -->
  <section class="py-12">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto">
        <h2 class="text-2xl font-bold text-gray-900 mb-8">Galería de la Propiedad</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {currentTestimonio.photoGallery.map((photo, index) => (
            <div class="group cursor-pointer">
              <div class="aspect-[4/3] overflow-hidden rounded-lg shadow-md group-hover:shadow-xl transition-shadow">
                <img 
                  src={photo.url} 
                  alt={photo.caption}
                  class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                />
              </div>
              <p class="mt-2 text-sm text-gray-600">{photo.caption}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Team Members -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl font-bold text-gray-900 mb-8">Equipo CLIC que participó</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          {currentTestimonio.teamMembers.map((member) => (
            <div class="bg-white rounded-lg p-6 shadow-md">
              <div class="flex items-start gap-4">
                <img 
                  src={member.avatar} 
                  alt={member.name}
                  class="w-16 h-16 rounded-full"
                />
                <div class="flex-1">
                  <h3 class="font-semibold text-gray-900">{member.name}</h3>
                  <p class="text-sm text-gray-600 mb-2">{member.title}</p>
                  <div class="flex items-center gap-2 mb-3">
                    <div class="flex">
                      {Array.from({length: 5}, (_, i) => (
                        <svg class={`w-4 h-4 ${i < Math.floor(member.rating) ? 'text-yellow-400' : 'text-gray-300'}`} fill="currentColor" viewBox="0 0 24 24">
                          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                      ))}
                    </div>
                    <span class="text-sm text-gray-600">({member.reviewCount} reseñas)</span>
                  </div>
                  <blockquote class="text-sm text-gray-700 italic mb-4">
                    "{member.testimonialQuote}"
                  </blockquote>
                  <div class="flex gap-2">
                    <a 
                      href={`tel:${member.phone}`}
                      class="inline-flex items-center gap-1 px-3 py-1 bg-[#f04e00] text-white rounded text-xs hover:bg-[#d94400] transition-colors"
                    >
                      <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                      </svg>
                      Llamar
                    </a>
                    <a 
                      href={`https://wa.me/${member.whatsapp}`}
                      target="_blank"
                      class="inline-flex items-center gap-1 px-3 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600 transition-colors"
                    >
                      <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
                      </svg>
                      WhatsApp
                    </a>
                  </div>
                </div>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Similar Properties -->
  <PropertyCarousel 
    title="Propiedades similares disponibles"
    subtitle="Encuentra tu hogar ideal en la misma zona donde Juan Luis encontró el suyo"
    properties={currentTestimonio.similarProperties}
    viewAllLink="/comprar/villa/casa-de-campo"
  />

  <!-- Related Testimonials -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-2xl font-bold text-gray-900 mb-8">Otros testimonios que te pueden interesar</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {currentTestimonio.relatedTestimonials.map((testimonial) => (
          <a 
            href={`/testimonios/${testimonial.category}/${testimonial.slug}`}
            class="group bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow"
          >
            <div class="aspect-video overflow-hidden rounded-t-lg">
              <img 
                src={testimonial.thumbnail} 
                alt={testimonial.title}
                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
              />
            </div>
            <div class="p-4">
              <h3 class="font-semibold text-gray-900 group-hover:text-[#f04e00] transition-colors mb-2">
                {testimonial.title}
              </h3>
              <p class="text-sm text-gray-600 mb-3">{testimonial.excerpt}</p>
              <div class="flex items-center justify-between">
                <span class="text-xs text-gray-500">Por {testimonial.author}</span>
                <div class="flex">
                  {Array.from({length: testimonial.rating}, (_, i) => (
                    <svg class="w-3 h-3 text-yellow-400" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  ))}
                </div>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-gradient-to-r from-[#f04e00] to-[#ff7a3d]">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
        ¿Quieres vivir tu propia historia de éxito?
      </h2>
      <p class="text-xl text-white/90 mb-8 max-w-2xl mx-auto">
        Como Juan Luis, tú también puedes encontrar la propiedad perfecta con nuestro equipo de expertos
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a 
          href="/contacto" 
          class="inline-block px-8 py-3 bg-white text-[#f04e00] rounded-lg hover:bg-gray-100 transition-colors font-medium"
        >
          Quiero empezar mi proceso
        </a>
        <a 
          href={`/comprar/villa/${currentTestimonio.location.toLowerCase().replace(/\s+/g, '-')}`}
          class="inline-block px-8 py-3 bg-white/20 text-white border border-white rounded-lg hover:bg-white/30 transition-colors font-medium"
        >
          Ver propiedades en {currentTestimonio.location}
        </a>
      </div>
    </div>
  </section>
</Layout>