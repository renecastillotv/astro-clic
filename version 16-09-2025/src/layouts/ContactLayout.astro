---
// src/layouts/ContactLayout.astro - Layout para p√°gina de contacto
import Layout from './Layout.astro';

// ===================================================================
// EXTRACCI√ìN DE DATOS DEL PROP
// ===================================================================

const { data } = Astro.props;
const language = data?.language || 'es';

// ===================================================================
// DATOS EST√ÅTICOS DE FALLBACK 
// ===================================================================

let contactData = data;

// Si no hay datos, usar fallback est√°tico
if (!contactData || !contactData.contactInfo) {
  console.log('üìû ContactLayout: Usando datos est√°ticos de fallback');
  
  contactData = {
    language: language,
    contactInfo: {
      phone: '+1 809 555 0100',
      whatsapp: '18095550100',
      email: 'hola@clic.do',
      address: language === 'es' ? 'Av. Winston Churchill, Plaza de la Salud, Torre 2, Piso 8' :
               language === 'en' ? 'Winston Churchill Ave, Plaza de la Salud, Tower 2, Floor 8' :
               'Av. Winston Churchill, Plaza de la Salud, Tour 2, √âtage 8',
      city: language === 'es' ? 'Santo Domingo, Rep√∫blica Dominicana' :
            language === 'en' ? 'Santo Domingo, Dominican Republic' :
            'Santo Domingo, R√©publique dominicaine',
      hours: {
        weekdays: language === 'es' ? 'Lunes - Viernes: 8:00 AM - 6:00 PM' :
                  language === 'en' ? 'Monday - Friday: 8:00 AM - 6:00 PM' :
                  'Lundi - Vendredi: 8:00 AM - 6:00 PM',
        saturday: language === 'es' ? 'S√°bado: 9:00 AM - 2:00 PM' :
                  language === 'en' ? 'Saturday: 9:00 AM - 2:00 PM' :
                  'Samedi: 9:00 AM - 2:00 PM',
        sunday: language === 'es' ? 'Domingo: Cerrado' :
                language === 'en' ? 'Sunday: Closed' :
                'Dimanche: Ferm√©'
      }
    },
    services: [
      { 
        value: 'vender', 
        label: language === 'es' ? 'Quiero vender mi propiedad' :
               language === 'en' ? 'I want to sell my property' :
               'Je veux vendre ma propri√©t√©'
      },
      { 
        value: 'desarrollo', 
        label: language === 'es' ? 'Tengo un proyecto para desarrollar' :
               language === 'en' ? 'I have a project to develop' :
               'J\'ai un projet √† d√©velopper'
      },
      { 
        value: 'comprar', 
        label: language === 'es' ? 'Quiero comprar una propiedad' :
               language === 'en' ? 'I want to buy a property' :
               'Je veux acheter une propri√©t√©'
      },
      { 
        value: 'rentas', 
        label: language === 'es' ? 'Interesado en rentas vacacionales' :
               language === 'en' ? 'Interested in vacation rentals' :
               'Int√©ress√© par les locations de vacances'
      },
      { 
        value: 'evaluacion', 
        label: language === 'es' ? 'Evaluaci√≥n gratuita' :
               language === 'en' ? 'Free evaluation' :
               '√âvaluation gratuite'
      },
      { 
        value: 'asesor', 
        label: language === 'es' ? 'Quiero ser asesor inmobiliario' :
               language === 'en' ? 'I want to be a real estate advisor' :
               'Je veux √™tre conseiller immobilier'
      },
      { 
        value: 'otro', 
        label: language === 'es' ? 'Otro motivo' :
               language === 'en' ? 'Other reason' :
               'Autre raison'
      }
    ],
    team: [
      {
        name: 'Mar√≠a Gonz√°lez',
        title: language === 'es' ? 'Directora Comercial' :
               language === 'en' ? 'Commercial Director' :
               'Directrice Commerciale',
        phone: '+1 809 555 0101',
        email: 'maria@clic.do',
        specialties: [
          language === 'es' ? 'Ventas' : language === 'en' ? 'Sales' : 'Ventes',
          language === 'es' ? 'Propiedades de lujo' : language === 'en' ? 'Luxury properties' : 'Propri√©t√©s de luxe'
        ],
        avatar: 'https://i.pravatar.cc/150?img=5'
      },
      {
        name: 'Carlos Rodr√≠guez',
        title: language === 'es' ? 'Especialista en Proyectos' :
               language === 'en' ? 'Projects Specialist' :
               'Sp√©cialiste des Projets',
        phone: '+1 809 555 0102',
        email: 'carlos@clic.do',
        specialties: [
          language === 'es' ? 'Desarrollos' : language === 'en' ? 'Developments' : 'D√©veloppements',
          language === 'es' ? 'Comercializaci√≥n' : language === 'en' ? 'Marketing' : 'Commercialisation'
        ],
        avatar: 'https://i.pravatar.cc/150?img=8'
      },
      {
        name: 'Ana Mart√≠nez',
        title: language === 'es' ? 'Asesora de Ventas' :
               language === 'en' ? 'Sales Advisor' :
               'Conseill√®re de Ventes',
        phone: '+1 809 555 0103',
        email: 'ana@clic.do',
        specialties: [
          language === 'es' ? 'Primeros compradores' : language === 'en' ? 'First-time buyers' : 'Premiers acheteurs',
          language === 'es' ? 'Asesor√≠a' : language === 'en' ? 'Advisory' : 'Conseil'
        ],
        avatar: 'https://i.pravatar.cc/150?img=16'
      }
    ],
    seo: {
      title: language === 'es' ? 'Contacto - CLIC Inmobiliaria' :
             language === 'en' ? 'Contact - CLIC Real Estate' :
             'Contact - CLIC Immobilier',
      description: language === 'es' ? 'Cont√°ctanos para vender tu propiedad, desarrollar tu proyecto o encontrar tu hogar ideal. Estamos aqu√≠ para ayudarte.' :
                   language === 'en' ? 'Contact us to sell your property, develop your project or find your ideal home. We are here to help you.' :
                   'Contactez-nous pour vendre votre propri√©t√©, d√©velopper votre projet ou trouver votre maison id√©ale. Nous sommes l√† pour vous aider.'
    }
  };
}

// ===================================================================
// PROCESAR DATOS FINALES
// ===================================================================

const contactInfo = contactData.contactInfo;
const services = contactData.services || [];
const team = contactData.team || [];

// ===================================================================
// TEXTOS POR IDIOMA
// ===================================================================

const TEXTS = {
  es: {
    heroTitle: 'Hablemos de tu proyecto',
    heroSubtitle: 'Estamos aqu√≠ para ayudarte. Conversemos sin compromiso sobre c√≥mo podemos trabajar juntos.',
    formTitle: 'Env√≠anos un mensaje',
    directContactTitle: '¬øPrefieres contacto directo?',
    officeTitle: 'Nuestra oficina',
    teamTitle: 'Nuestro equipo',
    mapTitle: 'Encu√©ntranos',
    workWithUsTitle: '¬øQuieres trabajar con nosotros?',
    workWithUsSubtitle: 'Estamos creciendo y buscamos asesores inmobiliarios comprometidos',
    formFields: {
      name: 'Nombre',
      phone: 'Tel√©fono',
      email: 'Email',
      service: '¬øEn qu√© te podemos ayudar?',
      message: 'Cu√©ntanos m√°s detalles',
      messagePlaceholder: 'Cu√©ntanos sobre tu propiedad, proyecto o lo que necesitas...',
      contact: '¬øCu√°ndo te gustar√≠a que te contactemos?',
      submit: 'Enviar mensaje',
      required: '*',
      selectOption: 'Selecciona una opci√≥n'
    },
    contactOptions: {
      asap: 'Lo antes posible',
      tomorrow: 'Ma√±ana',
      thisWeek: 'Esta semana',
      nextWeek: 'Pr√≥xima semana',
      notUrgent: 'No es urgente'
    },
    quickActions: {
      callNow: 'Llamar ahora',
      whatsapp: 'WhatsApp',
      quickResponse: 'Respuesta r√°pida',
      email: 'Email'
    },
    workOffer: {
      title: 'Lo que ofrecemos:',
      items: [
        'Comisiones competitivas',
        'Capacitaci√≥n continua',
        'Leads de calidad',
        'Soporte de marketing',
        'Ambiente de trabajo positivo'
      ]
    },
    workLooking: {
      title: 'Lo que buscamos:',
      items: [
        'Personas comprometidas',
        'Ganas de aprender y crecer',
        'Enfoque en servicio al cliente',
        'Disponibilidad para trabajar fines de semana',
        'Experiencia en ventas (no necesariamente inmobiliaria)'
      ]
    },
    workCta: '¬øTe interesa? Completa el formulario arriba seleccionando "Quiero ser asesor inmobiliario"',
    applyNow: 'Aplicar ahora',
    responseTime: '* Te contactaremos en menos de 24 horas'
  },
  en: {
    heroTitle: 'Let\'s talk about your project',
    heroSubtitle: 'We are here to help you. Let\'s talk without commitment about how we can work together.',
    formTitle: 'Send us a message',
    directContactTitle: 'Prefer direct contact?',
    officeTitle: 'Our office',
    teamTitle: 'Our team',
    mapTitle: 'Find us',
    workWithUsTitle: 'Want to work with us?',
    workWithUsSubtitle: 'We are growing and looking for committed real estate advisors',
    formFields: {
      name: 'Name',
      phone: 'Phone',
      email: 'Email',
      service: 'How can we help you?',
      message: 'Tell us more details',
      messagePlaceholder: 'Tell us about your property, project or what you need...',
      contact: 'When would you like us to contact you?',
      submit: 'Send message',
      required: '*',
      selectOption: 'Select an option'
    },
    contactOptions: {
      asap: 'As soon as possible',
      tomorrow: 'Tomorrow',
      thisWeek: 'This week',
      nextWeek: 'Next week',
      notUrgent: 'Not urgent'
    },
    quickActions: {
      callNow: 'Call now',
      whatsapp: 'WhatsApp',
      quickResponse: 'Quick response',
      email: 'Email'
    },
    workOffer: {
      title: 'What we offer:',
      items: [
        'Competitive commissions',
        'Continuous training',
        'Quality leads',
        'Marketing support',
        'Positive work environment'
      ]
    },
    workLooking: {
      title: 'What we\'re looking for:',
      items: [
        'Committed people',
        'Desire to learn and grow',
        'Focus on customer service',
        'Availability to work weekends',
        'Sales experience (not necessarily real estate)'
      ]
    },
    workCta: 'Interested? Complete the form above by selecting "I want to be a real estate advisor"',
    applyNow: 'Apply now',
    responseTime: '* We will contact you within 24 hours'
  },
  fr: {
    heroTitle: 'Parlons de votre projet',
    heroSubtitle: 'Nous sommes l√† pour vous aider. Parlons sans engagement de la fa√ßon dont nous pouvons travailler ensemble.',
    formTitle: 'Envoyez-nous un message',
    directContactTitle: 'Pr√©f√©rez-vous un contact direct?',
    officeTitle: 'Notre bureau',
    teamTitle: 'Notre √©quipe',
    mapTitle: 'Trouvez-nous',
    workWithUsTitle: 'Vous voulez travailler avec nous?',
    workWithUsSubtitle: 'Nous grandissons et cherchons des conseillers immobiliers engag√©s',
    formFields: {
      name: 'Nom',
      phone: 'T√©l√©phone',
      email: 'Email',
      service: 'Comment pouvons-nous vous aider?',
      message: 'Donnez-nous plus de d√©tails',
      messagePlaceholder: 'Parlez-nous de votre propri√©t√©, projet ou de ce dont vous avez besoin...',
      contact: 'Quand aimeriez-vous que nous vous contactions?',
      submit: 'Envoyer le message',
      required: '*',
      selectOption: 'S√©lectionnez une option'
    },
    contactOptions: {
      asap: 'Le plus t√¥t possible',
      tomorrow: 'Demain',
      thisWeek: 'Cette semaine',
      nextWeek: 'La semaine prochaine',
      notUrgent: 'Pas urgent'
    },
    quickActions: {
      callNow: 'Appeler maintenant',
      whatsapp: 'WhatsApp',
      quickResponse: 'R√©ponse rapide',
      email: 'Email'
    },
    workOffer: {
      title: 'Ce que nous offrons:',
      items: [
        'Commissions comp√©titives',
        'Formation continue',
        'Prospects de qualit√©',
        'Support marketing',
        'Environnement de travail positif'
      ]
    },
    workLooking: {
      title: 'Ce que nous recherchons:',
      items: [
        'Personnes engag√©es',
        'D√©sir d\'apprendre et de grandir',
        'Focus sur le service client',
        'Disponibilit√© pour travailler les week-ends',
        'Exp√©rience en vente (pas n√©cessairement immobili√®re)'
      ]
    },
    workCta: 'Int√©ress√©? Remplissez le formulaire ci-dessus en s√©lectionnant "Je veux √™tre conseiller immobilier"',
    applyNow: 'Postuler maintenant',
    responseTime: '* Nous vous contacterons dans les 24 heures'
  }
};

const text = TEXTS[language] || TEXTS.es;

console.log('‚úÖ ContactLayout preparado:', {
  language,
  servicesCount: services.length,
  teamCount: team.length,
  hasContactInfo: !!contactInfo
});
---

<Layout 
  title={contactData.seo?.title || text.heroTitle}
  description={contactData.seo?.description || text.heroSubtitle}
  language={language}
>
  <!-- Hero Section -->
  <section class="bg-gray-50 py-12">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">
          {text.heroTitle}
        </h1>
        <p class="text-xl text-gray-600">
          {text.heroSubtitle}
        </p>
      </div>
    </div>
  </section>

  <!-- Main Contact Section -->
  <section class="py-12">
    <div class="container mx-auto px-4">
      <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-12">
        
        <!-- Contact Form -->
        <div class="bg-white rounded-lg shadow-md p-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-6">{text.formTitle}</h2>
          
          <form class="space-y-6" id="contactForm">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">{text.formFields.name} {text.formFields.required}</label>
                <input 
                  type="text" 
                  name="nombre"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#f04e00] focus:border-transparent"
                  placeholder={text.formFields.name}
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">{text.formFields.phone} {text.formFields.required}</label>
                <input 
                  type="tel" 
                  name="telefono"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#f04e00] focus:border-transparent"
                  placeholder="+1 809 555 0000"
                />
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">{text.formFields.email} {text.formFields.required}</label>
              <input 
                type="email" 
                name="email"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#f04e00] focus:border-transparent"
                placeholder="tu@email.com"
              />
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">{text.formFields.service} {text.formFields.required}</label>
              <select 
                name="servicio"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#f04e00] focus:border-transparent"
                id="servicioSelect"
              >
                <option value="">{text.formFields.selectOption}</option>
                {services.map((servicio) => (
                  <option value={servicio.value}>{servicio.label}</option>
                ))}
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">{text.formFields.message}</label>
              <textarea 
                name="mensaje"
                rows="4"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#f04e00] focus:border-transparent resize-none"
                placeholder={text.formFields.messagePlaceholder}
              ></textarea>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">{text.formFields.contact}</label>
              <select 
                name="contacto_preferido"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#f04e00] focus:border-transparent"
              >
                <option value="asap">{text.contactOptions.asap}</option>
                <option value="manana">{text.contactOptions.tomorrow}</option>
                <option value="esta_semana">{text.contactOptions.thisWeek}</option>
                <option value="proxima_semana">{text.contactOptions.nextWeek}</option>
                <option value="no_urgente">{text.contactOptions.notUrgent}</option>
              </select>
            </div>
            
            <button 
              type="submit"
              class="w-full bg-[#f04e00] text-white py-3 px-6 rounded-lg hover:bg-[#d94400] transition-colors font-medium"
            >
              {text.formFields.submit}
            </button>
            
            <p class="text-sm text-gray-600 text-center">
              {text.responseTime}
            </p>
          </form>
        </div>
        
        <!-- Contact Info -->
        <div class="space-y-8">
          <!-- Quick Contact -->
          <div class="bg-[#f04e00] rounded-lg p-6 text-white">
            <h3 class="text-xl font-bold mb-4">{text.directContactTitle}</h3>
            
            <div class="space-y-4">
              <a 
                href={`tel:${contactInfo.phone}`}
                class="flex items-center gap-3 hover:bg-white/10 p-2 rounded transition-colors"
              >
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                </svg>
                <div>
                  <div class="font-medium">{text.quickActions.callNow}</div>
                  <div class="text-sm text-white/80">{contactInfo.phone}</div>
                </div>
              </a>
              
              <a 
                href={`https://wa.me/${contactInfo.whatsapp}?text=${encodeURIComponent(language === 'es' ? 'Hola, estoy interesado en sus servicios inmobiliarios' : language === 'en' ? 'Hello, I am interested in your real estate services' : 'Bonjour, je suis int√©ress√© par vos services immobiliers')}`}
                target="_blank"
                class="flex items-center gap-3 hover:bg-white/10 p-2 rounded transition-colors"
              >
                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
                </svg>
                <div>
                  <div class="font-medium">{text.quickActions.whatsapp}</div>
                  <div class="text-sm text-white/80">{text.quickActions.quickResponse}</div>
                </div>
              </a>
              
              <a 
                href={`mailto:${contactInfo.email}`}
                class="flex items-center gap-3 hover:bg-white/10 p-2 rounded transition-colors"
              >
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                </svg>
                <div>
                  <div class="font-medium">{text.quickActions.email}</div>
                  <div class="text-sm text-white/80">{contactInfo.email}</div>
                </div>
              </a>
            </div>
          </div>
          
          <!-- Office Info -->
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-xl font-bold text-gray-900 mb-4">{text.officeTitle}</h3>
            
            <div class="space-y-3 text-gray-600">
              <div class="flex items-start gap-3">
                <svg class="w-5 h-5 text-[#f04e00] mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
                <div>
                  <div class="font-medium">{contactInfo.address}</div>
                  <div class="text-sm">{contactInfo.city}</div>
                </div>
              </div>
              
              <div class="flex items-start gap-3">
                <svg class="w-5 h-5 text-[#f04e00] mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <div class="text-sm">
                  <div>{contactInfo.hours.weekdays}</div>
                  <div>{contactInfo.hours.saturday}</div>
                  <div>{contactInfo.hours.sunday}</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Team -->
          {team.length > 0 && (
            <div class="bg-white rounded-lg shadow-md p-6">
              <h3 class="text-xl font-bold text-gray-900 mb-4">{text.teamTitle}</h3>
              
              <div class="space-y-4">
                {team.map((persona) => (
                  <div class="flex items-center gap-3">
                    <img 
                      src={persona.avatar} 
                      alt={persona.name}
                      class="w-12 h-12 rounded-full object-cover"
                    />
                    <div class="flex-1">
                      <div class="font-medium text-gray-900">{persona.name}</div>
                      <div class="text-sm text-gray-600">{persona.title}</div>
                      <div class="text-xs text-gray-500">{persona.specialties.join(', ')}</div>
                    </div>
                    <div class="flex gap-2">
                      <a 
                        href={`tel:${persona.phone}`}
                        class="p-2 text-[#f04e00] hover:bg-gray-100 rounded"
                        title={text.quickActions.callNow}
                      >
                        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                        </svg>
                      </a>
                      <a 
                        href={`mailto:${persona.email}`}
                        class="p-2 text-[#f04e00] hover:bg-gray-100 rounded"
                        title={text.quickActions.email}
                      >
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                      </a>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  </section>

  <!-- Map Section -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-2xl font-bold text-gray-900 text-center mb-8">{text.mapTitle}</h2>
        
        <div class="bg-gray-200 rounded-lg h-64 flex items-center justify-center">
          <div class="text-center text-gray-600">
            <svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
            </svg>
            <p class="text-sm">{contactInfo.address.split(',')[0]}</p>
            <p class="text-sm">{contactInfo.city}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Work With Us Section -->
  <section class="py-12 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-4">{text.workWithUsTitle}</h2>
          <p class="text-lg text-gray-600">
            {text.workWithUsSubtitle}
          </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div class="bg-gray-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">{text.workOffer.title}</h3>
            <ul class="space-y-2">
              {text.workOffer.items.map(item => (
                <li class="flex items-start gap-2">
                  <svg class="w-5 h-5 text-green-500 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <span class="text-gray-700">{item}</span>
                </li>
              ))}
            </ul>
          </div>
          
          <div class="bg-gray-50 rounded-lg p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">{text.workLooking.title}</h3>
            <ul class="space-y-2">
              {text.workLooking.items.map(item => (
                <li class="flex items-start gap-2">
                  <svg class="w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <span class="text-gray-700">{item}</span>
                </li>
              ))}
            </ul>
          </div>
        </div>
        
        <div class="text-center mt-8">
          <p class="text-gray-600 mb-4">
            {text.workCta}
          </p>
          <a 
            href="#contactForm"
            class="inline-block px-6 py-2 bg-[#f04e00] text-white rounded-lg hover:bg-[#d94400] transition-colors"
          >
            {text.applyNow}
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  // Handle URL parameters for pre-selecting service
  document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const servicio = urlParams.get('servicio');
    
    if (servicio) {
      const selectElement = document.getElementById('servicioSelect');
      if (selectElement) {
        selectElement.value = servicio;
        
        // If it's asesor, scroll to the work with us section
        if (servicio === 'asesor') {
          setTimeout(() => {
            const workSection = document.querySelector('[href="#contactForm"]').closest('section');
            if (workSection) {
              workSection.scrollIntoView({ behavior: 'smooth' });
            }
          }, 100);
        }
      }
    }
  });

  // Simple form handling
  document.getElementById('contactForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const servicio = formData.get('servicio');
    
    // Different messages based on service type and language
    const userLang = document.documentElement.lang || 'es';
    let message = userLang === 'es' ? '¬°Gracias por tu mensaje! Te contactaremos pronto.' :
                  userLang === 'en' ? 'Thank you for your message! We will contact you soon.' :
                  'Merci pour votre message! Nous vous contacterons bient√¥t.';
    
    if (servicio === 'asesor') {
      message = userLang === 'es' ? '¬°Gracias por tu inter√©s en trabajar con nosotros! Revisaremos tu aplicaci√≥n y te contactaremos pronto.' :
                userLang === 'en' ? 'Thank you for your interest in working with us! We will review your application and contact you soon.' :
                'Merci pour votre int√©r√™t √† travailler avec nous! Nous examinerons votre candidature et vous contacterons bient√¥t.';
    } else if (servicio === 'vender') {
      message = userLang === 'es' ? '¬°Gracias por contactarnos! Te llamaremos pronto para hablar sobre tu propiedad.' :
                userLang === 'en' ? 'Thank you for contacting us! We will call you soon to talk about your property.' :
                'Merci de nous avoir contact√©s! Nous vous appellerons bient√¥t pour parler de votre propri√©t√©.';
    } else if (servicio === 'desarrollo') {
      message = userLang === 'es' ? '¬°Gracias por tu inter√©s! Nos pondremos en contacto contigo para discutir tu proyecto.' :
                userLang === 'en' ? 'Thank you for your interest! We will contact you to discuss your project.' :
                'Merci pour votre int√©r√™t! Nous vous contacterons pour discuter de votre projet.';
    }
    
    alert(message);
    
    // Reset form
    this.reset();
  });
</script>