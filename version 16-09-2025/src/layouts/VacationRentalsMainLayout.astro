---
// src/layouts/VacationRentalsMainLayout.astro - Layout principal para hu√©spedes que buscan rentar
import Layout from './Layout.astro';
import RentalCarousel from '../components/RentalCarousel.astro';
import RentalSearchBox from '../components/RentalSearchBox.astro';
import RentalTypeGrid from '../components/RentalTypeGrid.astro';
import DestinationGrid from '../components/DestinationGrid.astro';
import RentalStats from '../components/RentalStats.astro';
import RentalFeatures from '../components/RentalFeatures.astro';
import SEODescription from '../components/SEODescription.astro';
import DynamicFAQs from '../components/DynamicFAQs.astro';
import Testimonials from '../components/Testimonials.astro';
import VideoGallery from '../components/VideoGallery.astro';
import RelatedArticles from '../components/RelatedArticles.astro';

// ===================================================================
// EXTRACCI√ìN DE DATOS DEL PROP
// ===================================================================

const { data } = Astro.props;
const language = data?.language || 'es';

// ===================================================================
// DATOS EST√ÅTICOS DE FALLBACK 
// ===================================================================

let rentalsMainData = data;

// Si no hay datos, usar fallback est√°tico
if (!rentalsMainData || !rentalsMainData.properties) {
  console.log('üèñÔ∏è VacationRentalsMainLayout: Usando datos est√°ticos de fallback');
  
  rentalsMainData = {
    language: language,
    properties: [
      {
        slug: 'villa-paradiso',
        titulo: language === 'es' ? 'Villa Paradiso - Punta Cana' :
                language === 'en' ? 'Villa Paradiso - Punta Cana' :
                'Villa Paradiso - Punta Cana',
        precio: '$320/noche',
        imagen: 'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800&h=600&fit=crop',
        sector: 'Punta Cana',
        habitaciones: 4,
        banos: 4,
        capacidad: 8,
        tipo: 'Villa',
        rating: 4.9,
        destacado: true,
        descuento: language === 'es' ? 'Disponible ahora' : language === 'en' ? 'Available now' : 'Disponible maintenant'
      },
      {
        slug: 'penthouse-bavaro',
        titulo: language === 'es' ? 'Penthouse B√°varo Beach' :
                language === 'en' ? 'Penthouse Bavaro Beach' :
                'Penthouse Bavaro Beach',
        precio: '$180/noche',
        imagen: 'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=600&fit=crop',
        sector: 'B√°varo',
        habitaciones: 3,
        banos: 2,
        capacidad: 6,
        tipo: 'Apartamento',
        rating: 4.7,
        nuevo: true
      },
      {
        slug: 'villa-lujo-cap-cana',
        titulo: language === 'es' ? 'Villa de Lujo Cap Cana' :
                language === 'en' ? 'Luxury Villa Cap Cana' :
                'Villa de Luxe Cap Cana',
        precio: '$580/noche',
        imagen: 'https://images.unsplash.com/photo-1613977257363-707ba9348227?w=800&h=600&fit=crop',
        sector: 'Cap Cana',
        habitaciones: 5,
        banos: 5,
        capacidad: 10,
        tipo: language === 'es' ? 'Villa de Lujo' : language === 'en' ? 'Luxury Villa' : 'Villa de Luxe',
        rating: 5.0
      },
      {
        slug: 'apartamento-las-terrenas',
        titulo: language === 'es' ? 'Apartamento Frente al Mar Las Terrenas' :
                language === 'en' ? 'Oceanfront Apartment Las Terrenas' :
                'Appartement Face √† la Mer Las Terrenas',
        precio: '$150/noche',
        imagen: 'https://images.unsplash.com/photo-1571003123894-1f0594d2b5d9?w=800&h=600&fit=crop',
        sector: 'Las Terrenas',
        habitaciones: 2,
        banos: 2,
        capacidad: 4,
        tipo: 'Apartamento',
        rating: 4.6
      },
      {
        slug: 'casa-samana-playa',
        titulo: language === 'es' ? 'Casa Familiar Saman√°' :
                language === 'en' ? 'Family House Samana' :
                'Maison Familiale Samana',
        precio: '$280/noche',
        imagen: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&h=600&fit=crop',
        sector: 'Saman√°',
        habitaciones: 3,
        banos: 3,
        capacidad: 6,
        tipo: 'Casa',
        rating: 4.8
      }
    ],
    searchParams: data?.searchParams || {},
    isSearchPage: data?.isSearchPage || false,
    totalProperties: data?.totalProperties || 5,
    stats: [
      { 
        number: '500+', 
        label: language === 'es' ? 'Propiedades verificadas' :
               language === 'en' ? 'Verified properties' :
               'Propri√©t√©s v√©rifi√©es',
        icon: 'properties',
        color: 'text-[#f04e00]'
      },
      { 
        number: '98%', 
        label: language === 'es' ? 'Hu√©spedes satisfechos' :
               language === 'en' ? 'Satisfied guests' :
               'H√¥tes satisfaits',
        icon: 'rating',
        color: 'text-yellow-500'
      },
      { 
        number: '24/7', 
        label: language === 'es' ? 'Soporte local real' :
               language === 'en' ? 'Real local support' :
               'Support local r√©el',
        icon: 'support',
        color: 'text-blue-600'
      },
      { 
        number: '15+', 
        label: language === 'es' ? 'A√±os de experiencia' :
               language === 'en' ? 'Years of experience' :
               'Ann√©es d\'exp√©rience',
        icon: 'experience',
        color: 'text-green-600'
      }
    ],
    rentalFAQs: [
      {
        id: 'que-incluye-renta-vacacional',
        question: language === 'es' ? '¬øQu√© incluye una renta vacacional en Rep√∫blica Dominicana?' :
                  language === 'en' ? 'What does a vacation rental in Dominican Republic include?' :
                  'Qu\'est-ce qui est inclus dans une location de vacances en R√©publique Dominicaine?',
        answer: language === 'es' ? 'Nuestras rentas vacacionales incluyen WiFi gratuito, ropa de cama y toallas de calidad hotelera, limpieza inicial, aire acondicionado, cocina equipada, y soporte 24/7 en espa√±ol. Dependiendo de la propiedad, tambi√©n incluyen piscina, parking, servicios de conserjer√≠a y amenidades premium.' :
                language === 'en' ? 'Our vacation rentals include free WiFi, hotel-quality bedding and towels, initial cleaning, air conditioning, equipped kitchen, and 24/7 support in Spanish. Depending on the property, they also include pool, parking, concierge services and premium amenities.' :
                'Nos locations de vacances incluent WiFi gratuit, literie et serviettes de qualit√© h√¥teli√®re, nettoyage initial, climatisation, cuisine √©quip√©e, et support 24/7 en espagnol. Selon la propri√©t√©, elles incluent aussi piscine, parking, services de conciergerie et √©quipements premium.',
        category: 'servicios',
        tags: ['incluido', 'amenidades', 'servicios']
      },
      {
        id: 'mejor-epoca-visitar-rd',
        question: language === 'es' ? '¬øCu√°l es la mejor √©poca para rentar vacacional en RD?' :
                  language === 'en' ? 'What\'s the best time to rent vacation property in DR?' :
                  'Quelle est la meilleure p√©riode pour louer une propri√©t√© de vacances en RD?',
        answer: language === 'es' ? 'Rep√∫blica Dominicana tiene clima tropical todo el a√±o. La temporada alta (diciembre-abril) ofrece menos lluvia pero m√°s demanda. La temporada baja (mayo-noviembre) tiene precios hasta 40% m√°s econ√≥micos y menos turistas, ideal para quienes buscan tranquilidad.' :
                language === 'en' ? 'Dominican Republic has tropical climate year-round. High season (December-April) offers less rain but more demand. Low season (May-November) has prices up to 40% cheaper and fewer tourists, ideal for those seeking tranquility.' :
                'La R√©publique Dominicaine a un climat tropical toute l\'ann√©e. La haute saison (d√©cembre-avril) offre moins de pluie mais plus de demande. La basse saison (mai-novembre) a des prix jusqu\'√† 40% moins chers et moins de touristes, id√©al pour ceux qui cherchent la tranquillit√©.',
        category: 'viaje',
        tags: ['temporada', 'clima', 'precios']
      }
    ],
    rentalTestimonials: [
      {
        id: 'familia-garcia-punta-cana',
        category: 'familias',
        author: {
          name: 'Mar√≠a Garc√≠a',
          location: 'Madrid, Espa√±a',
          verified: true,
          avatar: 'https://i.pravatar.cc/150?img=7'
        },
        rating: 5,
        text: language === 'es' ? 'Incre√≠ble experiencia en Villa Paradiso, Punta Cana. La propiedad super√≥ todas nuestras expectativas. La piscina privada fue perfecta para los ni√±os y la ubicaci√≥n nos permiti√≥ caminar a la playa. CLIC nos ayud√≥ desde el primer contacto hasta el check-out.' :
              language === 'en' ? 'Incredible experience at Villa Paradiso, Punta Cana. The property exceeded all our expectations. The private pool was perfect for the kids and the location allowed us to walk to the beach. CLIC helped us from first contact to check-out.' :
              'Exp√©rience incroyable √† Villa Paradiso, Punta Cana. La propri√©t√© a d√©pass√© toutes nos attentes. La piscine priv√©e √©tait parfaite pour les enfants et l\'emplacement nous a permis de marcher jusqu\'√† la plage. CLIC nous a aid√©s du premier contact au check-out.',
        excerpt: language === 'es' ? 'La mejor experiencia vacacional que hemos tenido. Punta Cana es realmente m√°gico.' :
                 language === 'en' ? 'The best vacation experience we\'ve had. Punta Cana is truly magical.' :
                 'La meilleure exp√©rience de vacances que nous ayons eue. Punta Cana est vraiment magique.',
        propertyType: 'Villa',
        location: 'Punta Cana',
        date: '2024-03-15',
        views: '1,2K',
        readTime: '3 min',
        stayDuration: language === 'es' ? '7 noches' : language === 'en' ? '7 nights' : '7 nuits',
        groupSize: language === 'es' ? '6 personas' : language === 'en' ? '6 people' : '6 personnes'
      }
    ],
    seo: {
      title: language === 'es' ? 'Rentas Vacacionales en Rep√∫blica Dominicana - CLIC' :
             language === 'en' ? 'Vacation Rentals in Dominican Republic - CLIC' :
             'Locations de Vacances en R√©publique Dominicaine - CLIC',
      description: language === 'es' ? 'Encuentra la propiedad vacacional perfecta en Punta Cana, Cap Cana, Las Terrenas y m√°s. Villas, apartamentos y casas de lujo para tus vacaciones.' :
                   language === 'en' ? 'Find the perfect vacation property in Punta Cana, Cap Cana, Las Terrenas and more. Villas, apartments and luxury houses for your vacation.' :
                   'Trouvez la propri√©t√© de vacances parfaite √† Punta Cana, Cap Cana, Las Terrenas et plus. Villas, appartements et maisons de luxe pour vos vacances.'
    }
  };
}

// ===================================================================
// PROCESAR DATOS FINALES
// ===================================================================

const properties = rentalsMainData.properties || [];
const searchParams = rentalsMainData.searchParams || {};
const isSearchPage = rentalsMainData.isSearchPage || false;
const totalProperties = rentalsMainData.totalProperties || properties.length;
const stats = rentalsMainData.stats || [];
const rentalFAQs = rentalsMainData.rentalFAQs || [];
const rentalTestimonials = rentalsMainData.rentalTestimonials || [];

// ===================================================================
// TEXTOS POR IDIOMA
// ===================================================================

const TEXTS = {
  es: {
    heroTitle: 'Encuentra tu Hogar Vacacional Perfecto',
    heroSubtitle: 'Villas, apartamentos y casas de lujo en los mejores destinos de Rep√∫blica Dominicana',
    searchResultsTitle: 'Resultados de b√∫squeda',
    searchResultsSubtitle: (count) => `Encontramos ${count} ${count === 1 ? 'propiedad' : 'propiedades'} que coinciden con tu b√∫squeda`,
    featuredTitle: 'Propiedades Destacadas',
    featuredSubtitle: 'Las rentas vacacionales m√°s populares y mejor valoradas',
    whyChooseTitle: '¬øPor qu√© CLIC es #1 en Rentas Vacacionales en Rep√∫blica Dominicana?',
    whyChooseSubtitle: 'M√°s de 15 a√±os especializados en el mercado dominicano nos han ense√±ado qu√© necesitan realmente los hu√©spedes',
    noResultsTitle: 'No encontramos propiedades',
    noResultsText: 'No hay propiedades que coincidan con tus criterios de b√∫squeda. Intenta ajustar los filtros o explora nuestras opciones disponibles.',
    noResultsButton: 'Ver todas las propiedades',
    ownersCtaTitle: '¬øTienes una propiedad vacacional?',
    ownersCtaText: '√önete a nuestra plataforma y maximiza tus ingresos por rentas vacacionales',
    ownersCtaButton: 'Conocer nuestros planes',
    finalCtaTitle: '¬øListo para unas vacaciones inolvidables?',
    finalCtaSubtitle: 'Encuentra y reserva la propiedad vacacional perfecta en Rep√∫blica Dominicana',
    finalCtaButton1: 'Ver todas las propiedades',
    finalCtaButton2: 'Ayuda personalizada',
    faqTitle: 'Preguntas Frecuentes sobre Rentas Vacacionales en Rep√∫blica Dominicana',
    faqSubtitle: 'Resolvemos todas tus dudas para que tengas las mejores vacaciones',
    testimonialsTitle: 'Experiencias Reales de Nuestros Hu√©spedes',
    testimonialsSubtitle: 'Miles de familias han creado recuerdos inolvidables con CLIC'
  },
  en: {
    heroTitle: 'Find Your Perfect Vacation Home',
    heroSubtitle: 'Villas, apartments and luxury houses in the best destinations of Dominican Republic',
    searchResultsTitle: 'Search results',
    searchResultsSubtitle: (count) => `We found ${count} ${count === 1 ? 'property' : 'properties'} that match your search`,
    featuredTitle: 'Featured Properties',
    featuredSubtitle: 'The most popular and best rated vacation rentals',
    whyChooseTitle: 'Why CLIC is #1 in Vacation Rentals in Dominican Republic?',
    whyChooseSubtitle: 'More than 15 years specialized in the Dominican market have taught us what guests really need',
    noResultsTitle: 'No properties found',
    noResultsText: 'There are no properties that match your search criteria. Try adjusting the filters or explore our available options.',
    noResultsButton: 'View all properties',
    ownersCtaTitle: 'Do you have a vacation property?',
    ownersCtaText: 'Join our platform and maximize your vacation rental income',
    ownersCtaButton: 'Learn about our plans',
    finalCtaTitle: 'Ready for an unforgettable vacation?',
    finalCtaSubtitle: 'Find and book the perfect vacation property in Dominican Republic',
    finalCtaButton1: 'View all properties',
    finalCtaButton2: 'Personalized help',
    faqTitle: 'Frequently Asked Questions about Vacation Rentals in Dominican Republic',
    faqSubtitle: 'We solve all your doubts so you have the best vacation',
    testimonialsTitle: 'Real Experiences from Our Guests',
    testimonialsSubtitle: 'Thousands of families have created unforgettable memories with CLIC'
  },
  fr: {
    heroTitle: 'Trouvez votre Maison de Vacances Parfaite',
    heroSubtitle: 'Villas, appartements et maisons de luxe dans les meilleures destinations de R√©publique Dominicaine',
    searchResultsTitle: 'R√©sultats de recherche',
    searchResultsSubtitle: (count) => `Nous avons trouv√© ${count} ${count === 1 ? 'propri√©t√©' : 'propri√©t√©s'} qui correspondent √† votre recherche`,
    featuredTitle: 'Propri√©t√©s en Vedette',
    featuredSubtitle: 'Les locations de vacances les plus populaires et les mieux not√©es',
    whyChooseTitle: 'Pourquoi CLIC est #1 dans les Locations de Vacances en R√©publique Dominicaine?',
    whyChooseSubtitle: 'Plus de 15 ans sp√©cialis√©s dans le march√© dominicain nous ont appris ce dont les h√¥tes ont vraiment besoin',
    noResultsTitle: 'Aucune propri√©t√© trouv√©e',
    noResultsText: 'Il n\'y a pas de propri√©t√©s qui correspondent √† vos crit√®res de recherche. Essayez d\'ajuster les filtres ou explorez nos options disponibles.',
    noResultsButton: 'Voir toutes les propri√©t√©s',
    ownersCtaTitle: 'Avez-vous une propri√©t√© de vacances?',
    ownersCtaText: 'Rejoignez notre plateforme et maximisez vos revenus de location de vacances',
    ownersCtaButton: 'D√©couvrir nos plans',
    finalCtaTitle: 'Pr√™t pour des vacances inoubliables?',
    finalCtaSubtitle: 'Trouvez et r√©servez la propri√©t√© de vacances parfaite en R√©publique Dominicaine',
    finalCtaButton1: 'Voir toutes les propri√©t√©s',
    finalCtaButton2: 'Aide personnalis√©e',
    faqTitle: 'Questions Fr√©quemment Pos√©es sur les Locations de Vacances en R√©publique Dominicaine',
    faqSubtitle: 'Nous r√©solvons tous vos doutes pour que vous ayez les meilleures vacances',
    testimonialsTitle: 'Exp√©riences R√©elles de nos H√¥tes',
    testimonialsSubtitle: 'Des milliers de familles ont cr√©√© des souvenirs inoubliables avec CLIC'
  }
};

const text = TEXTS[language] || TEXTS.es;

// URLs seg√∫n idioma
const routes = {
  es: {
    allRentals: '/rentas-vacacionales',
    plans: '/rentas-vacacionales/planes',
    contact: '/contacto'
  },
  en: {
    allRentals: '/en/vacation-rentals',
    plans: '/en/vacation-rentals/plans',
    contact: '/en/contact'
  },
  fr: {
    allRentals: '/fr/locations-vacances',
    plans: '/fr/locations-vacances/plans',
    contact: '/fr/contact'
  }
};

const currentRoutes = routes[language] || routes.es;

console.log('‚úÖ VacationRentalsMainLayout preparado:', {
  language,
  propertiesCount: properties.length,
  isSearchPage,
  totalProperties
});
---

<Layout 
  title={rentalsMainData.seo?.title || text.heroTitle}
  description={rentalsMainData.seo?.description || text.heroSubtitle}
  language={language}
>
  <!-- Hero Section with Search (solo en p√°gina principal) -->
  {!isSearchPage && (
    <section class="relative h-[700px] flex items-center justify-center">
      <!-- Background Image -->
      <div class="absolute inset-0">
        <img 
          src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2073&q=80" 
          alt="Playa tropical paradis√≠aca con aguas cristalinas"
          class="w-full h-full object-cover"
        />
        <div class="absolute inset-0 bg-black/30"></div>
      </div>
      
      <!-- Content -->
      <div class="relative z-10 container mx-auto px-4">
        <RentalSearchBox style="hero" />
      </div>
    </section>
  )}

  <!-- Search Results Header (solo en p√°ginas de b√∫squeda) -->
  {isSearchPage && (
    <section class="bg-gray-50 py-8">
      <div class="container mx-auto px-4">
        <!-- Buscador compacto -->
        <RentalSearchBox 
          style="compact" 
          showTitle={false}
          currentDestination={searchParams.destino || ''}
          currentCategory={searchParams.tipo || ''}
          currentBudget={searchParams.presupuesto || ''}
          currentGuests={searchParams.huespedes || ''}
        />
      </div>
    </section>
  )}

  <!-- SEO Content (solo en p√°ginas de b√∫squeda) -->
  {isSearchPage && (
    <section class="container mx-auto px-4 py-12">
      <SEODescription 
        destino={searchParams.destino || ''}
        tipo={searchParams.tipo || ''}
        presupuesto={searchParams.presupuesto || ''}
        huespedes={searchParams.huespedes || ''}
        totalProperties={totalProperties}
      />
    </section>
  )}

  <!-- Stats Section (solo en p√°gina principal) -->
  {!isSearchPage && (
    <RentalStats background="light" animated={true} stats={stats} />
  )}

  <!-- Featured Properties / Search Results -->
  <RentalCarousel 
    title={isSearchPage ? text.searchResultsTitle : text.featuredTitle}
    subtitle={isSearchPage 
      ? text.searchResultsSubtitle(totalProperties)
      : text.featuredSubtitle
    }
    properties={properties}
    viewAllLink={isSearchPage ? null : `${currentRoutes.allRentals}/destacadas`}
    showAll={isSearchPage}
  />

  <!-- No results message -->
  {isSearchPage && totalProperties === 0 && (
    <section class="container mx-auto px-4 py-12 text-center">
      <div class="max-w-2xl mx-auto">
        <div class="bg-gray-100 rounded-lg p-8">
          <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
          </svg>
          <h3 class="text-xl font-semibold text-gray-900 mb-2">{text.noResultsTitle}</h3>
          <p class="text-gray-600 mb-6">
            {text.noResultsText}
          </p>
          <a 
            href={currentRoutes.allRentals}
            class="inline-block px-6 py-3 bg-[#f04e00] text-white rounded-lg hover:bg-[#d94400] transition-colors font-semibold"
          >
            {text.noResultsButton}
          </a>
        </div>
      </div>
    </section>
  )}

  <!-- Types Section (solo en p√°gina principal) -->
  {!isSearchPage && (
    <RentalTypeGrid />
  )}

  <!-- Destinations Section (solo en p√°gina principal) -->
  {!isSearchPage && (
    <DestinationGrid layout="grid" />
  )}

  <!-- Why Choose Us Section (solo en p√°gina principal) -->
  {!isSearchPage && (
    <section class="py-16 bg-white">
      <div class="container mx-auto px-4">
        <div class="max-w-6xl mx-auto">
          <div class="text-center mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">
              {text.whyChooseTitle}
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
              {text.whyChooseSubtitle}
            </p>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Ventaja 1: Verificaci√≥n Personal -->
            <div class="text-center">
              <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-[#f04e00] to-[#ff7a3d] rounded-full flex items-center justify-center">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3">
                {language === 'es' ? '100% Verificadas Personalmente' :
                 language === 'en' ? '100% Personally Verified' :
                 '100% V√©rifi√©es Personnellement'}
              </h3>
              <p class="text-gray-600">
                {language === 'es' ? 'Nuestro equipo visita y verifica cada propiedad. No subimos nada que no hayamos visto con nuestros propios ojos. Garant√≠a de lo que ves es lo que obtienes.' :
                 language === 'en' ? 'Our team visits and verifies each property. We don\'t upload anything we haven\'t seen with our own eyes. Guarantee that what you see is what you get.' :
                 'Notre √©quipe visite et v√©rifie chaque propri√©t√©. Nous ne t√©l√©chargeons rien que nous n\'ayons pas vu de nos propres yeux. Garantie que ce que vous voyez est ce que vous obtenez.'}
              </p>
            </div>

            <!-- Ventaja 2: Soporte Local Real -->
            <div class="text-center">
              <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a2 2 0 01-2-2v-6a2 2 0 012-2h8z"/>
                </svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3">
                {language === 'es' ? 'Soporte Local 24/7 Real' :
                 language === 'en' ? 'Real Local Support 24/7' :
                 'Support Local R√©el 24/7'}
              </h3>
              <p class="text-gray-600">
                {language === 'es' ? 'No call centers en el extranjero. Equipo dominicano que conoce cada rinc√≥n del pa√≠s y puede resolver cualquier situaci√≥n en tiempo real durante tu estad√≠a.' :
                 language === 'en' ? 'No foreign call centers. Dominican team that knows every corner of the country and can solve any situation in real time during your stay.' :
                 'Pas de centres d\'appels √©trangers. √âquipe dominicaine qui conna√Æt chaque coin du pays et peut r√©soudre toute situation en temps r√©el pendant votre s√©jour.'}
              </p>
            </div>

            <!-- Ventaja 3: Precios Directos -->
            <div class="text-center">
              <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-emerald-500 to-emerald-600 rounded-full flex items-center justify-center">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"/>
                </svg>
              </div>
              <h3 class="text-xl font-semibold text-gray-900 mb-3">
                {language === 'es' ? 'Precios Directos del Propietario' :
                 language === 'en' ? 'Direct Owner Prices' :
                 'Prix Directs du Propri√©taire'}
              </h3>
              <p class="text-gray-600">
                {language === 'es' ? 'Sin intermediarios ni comisiones ocultas. Trabajamos directamente con propietarios para ofrecerte los mejores precios, hasta 30% menos que otras plataformas.' :
                 language === 'en' ? 'No intermediaries or hidden commissions. We work directly with owners to offer you the best prices, up to 30% less than other platforms.' :
                 'Pas d\'interm√©diaires ni de commissions cach√©es. Nous travaillons directement avec les propri√©taires pour vous offrir les meilleurs prix, jusqu\'√† 30% de moins que les autres plateformes.'}
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
  )}

  <!-- FAQs espec√≠ficas (solo en p√°gina principal) -->
  {!isSearchPage && rentalFAQs.length > 0 && (
    <DynamicFAQs 
      faqs={rentalFAQs}
      title={text.faqTitle}
      subtitle={text.faqSubtitle}
      context={{
        location: language === 'es' ? 'Rep√∫blica Dominicana' : language === 'en' ? 'Dominican Republic' : 'R√©publique Dominicaine',
        propertyType: language === 'es' ? 'Rentas Vacacionales' : language === 'en' ? 'Vacation Rentals' : 'Locations de Vacances'
      }}
    />
  )}

  <!-- Testimonios (solo en p√°gina principal) -->
  {!isSearchPage && rentalTestimonials.length > 0 && (
    <Testimonials 
      testimonials={rentalTestimonials}
      title={text.testimonialsTitle}
      subtitle={text.testimonialsSubtitle}
      layout="carousel"
      categoryPrefix="/testimonios/rentas-vacacionales"
    />
  )}

  <!-- Owners CTA -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-2xl font-bold text-gray-900 mb-4">
          {text.ownersCtaTitle}
        </h2>
        <p class="text-lg text-gray-600 mb-6">
          {text.ownersCtaText}
        </p>
        <a 
          href={currentRoutes.plans}
          class="inline-block px-8 py-3 bg-[#f04e00] text-white rounded-lg hover:bg-[#d94400] transition-colors font-semibold"
        >
          {text.ownersCtaButton}
        </a>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-[#f04e00]">
    <div class="container mx-auto px-4 text-center">
      <div class="max-w-3xl mx-auto text-white">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
          {isSearchPage ? 
            (language === 'es' ? '¬øNo encontraste lo que buscabas?' :
             language === 'en' ? 'Didn\'t find what you were looking for?' :
             'Vous n\'avez pas trouv√© ce que vous cherchiez?') :
            text.finalCtaTitle
          }
        </h2>
        <p class="text-xl mb-8 text-white/90">
          {isSearchPage ? 
            (language === 'es' ? 'Cont√°ctanos y te ayudamos a encontrar la propiedad perfecta para tus vacaciones' :
             language === 'en' ? 'Contact us and we\'ll help you find the perfect property for your vacation' :
             'Contactez-nous et nous vous aiderons √† trouver la propri√©t√© parfaite pour vos vacances') :
            text.finalCtaSubtitle
          }
        </p>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          {isSearchPage ? (
            <>
              <a 
                href={`${currentRoutes.contact}?servicio=rentas-huesped`}
                class="inline-block px-8 py-3 bg-white text-[#f04e00] rounded-lg hover:bg-gray-100 transition-colors font-semibold"
              >
                {text.finalCtaButton2}
              </a>
              <a 
                href={currentRoutes.allRentals}
                class="inline-block px-8 py-3 bg-white/20 text-white border border-white/30 rounded-lg hover:bg-white/30 transition-colors font-semibold"
              >
                {text.finalCtaButton1}
              </a>
            </>
          ) : (
            <>
              <a 
                href="#tipos-propiedades"
                class="inline-block px-8 py-3 bg-white text-[#f04e00] rounded-lg hover:bg-gray-100 transition-colors font-semibold"
              >
                {text.finalCtaButton1}
              </a>
              <a 
                href={`${currentRoutes.contact}?servicio=rentas-huesped`}
                class="inline-block px-8 py-3 bg-white/20 text-white border border-white/30 rounded-lg hover:bg-white/30 transition-colors font-semibold"
              >
                {text.finalCtaButton2}
              </a>
            </>
          )}
        </div>
      </div>
    </div>
  </section>
</Layout>